"use strict";(self.webpackChunkrc_resize_observer=self.webpackChunkrc_resize_observer||[]).push([[904],{33147:function(r,n,e){var o;e.r(n),e.d(n,{demos:function(){return z}});var t=e(15009),l=e.n(t),u=e(99289),p=e.n(u),i=e(67294),M=e(81935),a=e(27515),c=e(69945),R=e(45598),E=e(45520),d=e(54677),_=e(40150),m=e(36067),b=e(91033),O=e(35684),h=e(75531),f=e(60232),z={"docs-demo-basic-demo-basic":{component:i.memo(i.lazy(function(){return e.e(433).then(e.bind(e,34761))})),asset:{type:"BLOCK",id:"docs-demo-basic-demo-basic",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:e(37050).Z},react:{type:"NPM",value:"16.14.0"},"../src.tsx":{type:"FILE",value:e(2333).Z},"../assets/index.less":{type:"FILE",value:e(86834).Z},"rc-util":{type:"NPM",value:"5.44.2"},"./utils/observerUtil.ts":{type:"FILE",value:e(57571).Z},"./Collection.tsx":{type:"FILE",value:e(76044).Z},"./SingleObserver.tsx":{type:"FILE",value:e(11238).Z},"resize-observer-polyfill":{type:"NPM",value:"1.5.1"},"./DomWrapper.tsx":{type:"FILE",value:e(51336).Z}},entry:"index.tsx"},context:{"../src.tsx":a,"../assets/index.less":c,"./utils/observerUtil.ts":d,"./Collection.tsx":_,"./SingleObserver.tsx":m,"./DomWrapper.tsx":f,react:o||(o=e.t(i,2)),"/Users/afc163/Projects/resize-observer/src/index.tsx":a,"/Users/afc163/Projects/resize-observer/assets/index.less":c,"rc-util/lib/Children/toArray":R,"rc-util/lib/warning":E,"/Users/afc163/Projects/resize-observer/src/utils/observerUtil.ts":d,"/Users/afc163/Projects/resize-observer/src/Collection.tsx":_,"/Users/afc163/Projects/resize-observer/src/SingleObserver/index.tsx":m,"resize-observer-polyfill":b,"rc-util/lib/Dom/findDOMNode":O,"rc-util/lib/ref":h,"/Users/afc163/Projects/resize-observer/src/SingleObserver/DomWrapper.tsx":f},renderOpts:{compile:function(){var P=p()(l()().mark(function x(){var v,g=arguments;return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.e(335).then(e.bind(e,37335));case 2:return s.abrupt("return",(v=s.sent).default.apply(v,g));case 3:case"end":return s.stop()}},x)}));function D(){return P.apply(this,arguments)}return D}()}}}},84711:function(r,n,e){var o;e.r(n),e.d(n,{demos:function(){return z}});var t=e(15009),l=e.n(t),u=e(99289),p=e.n(u),i=e(67294),M=e(74289),a=e(27515),c=e(69945),R=e(45598),E=e(45520),d=e(54677),_=e(40150),m=e(36067),b=e(91033),O=e(35684),h=e(75531),f=e(60232),z={"docs-demo-collection-demo-collection":{component:i.memo(i.lazy(function(){return e.e(433).then(e.bind(e,5125))})),asset:{type:"BLOCK",id:"docs-demo-collection-demo-collection",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:e(21339).Z},react:{type:"NPM",value:"16.14.0"},"../src.tsx":{type:"FILE",value:e(2333).Z},"../assets/index.less":{type:"FILE",value:e(86834).Z},"rc-util":{type:"NPM",value:"5.44.2"},"./utils/observerUtil.ts":{type:"FILE",value:e(57571).Z},"./Collection.tsx":{type:"FILE",value:e(76044).Z},"./SingleObserver.tsx":{type:"FILE",value:e(11238).Z},"resize-observer-polyfill":{type:"NPM",value:"1.5.1"},"./DomWrapper.tsx":{type:"FILE",value:e(51336).Z}},entry:"index.tsx"},context:{"../src.tsx":a,"../assets/index.less":c,"./utils/observerUtil.ts":d,"./Collection.tsx":_,"./SingleObserver.tsx":m,"./DomWrapper.tsx":f,react:o||(o=e.t(i,2)),"/Users/afc163/Projects/resize-observer/src/index.tsx":a,"/Users/afc163/Projects/resize-observer/assets/index.less":c,"rc-util/lib/Children/toArray":R,"rc-util/lib/warning":E,"/Users/afc163/Projects/resize-observer/src/utils/observerUtil.ts":d,"/Users/afc163/Projects/resize-observer/src/Collection.tsx":_,"/Users/afc163/Projects/resize-observer/src/SingleObserver/index.tsx":m,"resize-observer-polyfill":b,"rc-util/lib/Dom/findDOMNode":O,"rc-util/lib/ref":h,"/Users/afc163/Projects/resize-observer/src/SingleObserver/DomWrapper.tsx":f},renderOpts:{compile:function(){var P=p()(l()().mark(function x(){var v,g=arguments;return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.e(335).then(e.bind(e,37335));case 2:return s.abrupt("return",(v=s.sent).default.apply(v,g));case 3:case"end":return s.stop()}},x)}));function D(){return P.apply(this,arguments)}return D}()}}}},94530:function(r,n,e){var o;e.r(n),e.d(n,{demos:function(){return z}});var t=e(15009),l=e.n(t),u=e(99289),p=e.n(u),i=e(67294),M=e(13249),a=e(69945),c=e(27515),R=e(45598),E=e(45520),d=e(54677),_=e(36067),m=e(40150),b=e(91033),O=e(35684),h=e(75531),f=e(60232),z={"docs-demo-debug-demo-debug":{component:i.memo(i.lazy(function(){return e.e(433).then(e.bind(e,5665))})),asset:{type:"BLOCK",id:"docs-demo-debug-demo-debug",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:e(29425).Z},react:{type:"NPM",value:"16.14.0"},"../assets/index.less":{type:"FILE",value:e(86834).Z},"../src.tsx":{type:"FILE",value:e(2333).Z},"rc-util":{type:"NPM",value:"5.44.2"},"./utils/observerUtil.ts":{type:"FILE",value:e(57571).Z},"./SingleObserver.tsx":{type:"FILE",value:e(11238).Z},"./Collection.tsx":{type:"FILE",value:e(76044).Z},"resize-observer-polyfill":{type:"NPM",value:"1.5.1"},"./DomWrapper.tsx":{type:"FILE",value:e(51336).Z}},entry:"index.tsx"},context:{"../assets/index.less":a,"../src.tsx":c,"./utils/observerUtil.ts":d,"./SingleObserver.tsx":_,"./Collection.tsx":m,"./DomWrapper.tsx":f,react:o||(o=e.t(i,2)),"/Users/afc163/Projects/resize-observer/assets/index.less":a,"/Users/afc163/Projects/resize-observer/src/index.tsx":c,"rc-util/lib/Children/toArray":R,"rc-util/lib/warning":E,"/Users/afc163/Projects/resize-observer/src/utils/observerUtil.ts":d,"/Users/afc163/Projects/resize-observer/src/SingleObserver/index.tsx":_,"/Users/afc163/Projects/resize-observer/src/Collection.tsx":m,"resize-observer-polyfill":b,"rc-util/lib/Dom/findDOMNode":O,"rc-util/lib/ref":h,"/Users/afc163/Projects/resize-observer/src/SingleObserver/DomWrapper.tsx":f},renderOpts:{compile:function(){var P=p()(l()().mark(function x(){var v,g=arguments;return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.e(335).then(e.bind(e,37335));case 2:return s.abrupt("return",(v=s.sent).default.apply(v,g));case 3:case"end":return s.stop()}},x)}));function D(){return P.apply(this,arguments)}return D}()}}}},48194:function(r,n,e){var o;e.r(n),e.d(n,{demos:function(){return z}});var t=e(15009),l=e.n(t),u=e(99289),p=e.n(u),i=e(67294),M=e(45261),a=e(27515),c=e(69945),R=e(45598),E=e(45520),d=e(54677),_=e(40150),m=e(36067),b=e(91033),O=e(35684),h=e(75531),f=e(60232),z={"docs-demo-render-props-demo-renderprops":{component:i.memo(i.lazy(function(){return e.e(433).then(e.bind(e,295))})),asset:{type:"BLOCK",id:"docs-demo-render-props-demo-renderprops",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:e(19746).Z},react:{type:"NPM",value:"16.14.0"},"../src.tsx":{type:"FILE",value:e(2333).Z},"../assets/index.less":{type:"FILE",value:e(86834).Z},"rc-util":{type:"NPM",value:"5.44.2"},"./utils/observerUtil.ts":{type:"FILE",value:e(57571).Z},"./Collection.tsx":{type:"FILE",value:e(76044).Z},"./SingleObserver.tsx":{type:"FILE",value:e(11238).Z},"resize-observer-polyfill":{type:"NPM",value:"1.5.1"},"./DomWrapper.tsx":{type:"FILE",value:e(51336).Z}},entry:"index.tsx"},context:{"../src.tsx":a,"../assets/index.less":c,"./utils/observerUtil.ts":d,"./Collection.tsx":_,"./SingleObserver.tsx":m,"./DomWrapper.tsx":f,react:o||(o=e.t(i,2)),"/Users/afc163/Projects/resize-observer/src/index.tsx":a,"/Users/afc163/Projects/resize-observer/assets/index.less":c,"rc-util/lib/Children/toArray":R,"rc-util/lib/warning":E,"/Users/afc163/Projects/resize-observer/src/utils/observerUtil.ts":d,"/Users/afc163/Projects/resize-observer/src/Collection.tsx":_,"/Users/afc163/Projects/resize-observer/src/SingleObserver/index.tsx":m,"resize-observer-polyfill":b,"rc-util/lib/Dom/findDOMNode":O,"rc-util/lib/ref":h,"/Users/afc163/Projects/resize-observer/src/SingleObserver/DomWrapper.tsx":f},renderOpts:{compile:function(){var P=p()(l()().mark(function x(){var v,g=arguments;return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.e(335).then(e.bind(e,37335));case 2:return s.abrupt("return",(v=s.sent).default.apply(v,g));case 3:case"end":return s.stop()}},x)}));function D(){return P.apply(this,arguments)}return D}()}}}},11171:function(r,n,e){e.r(n),e.d(n,{demos:function(){return l}});var o=e(67294),t=e(68537),l={}},69945:function(r,n,e){e.r(n)},55469:function(r,n,e){e.r(n),e.d(n,{texts:function(){return t}});var o=e(81935);const t=[]},61298:function(r,n,e){e.r(n),e.d(n,{texts:function(){return t}});var o=e(74289);const t=[{value:"Use ",paraId:0},{value:"ResizeObserver.Collection",paraId:0},{value:" to collect multiple ",paraId:0},{value:"ResizeObserver",paraId:0},{value:" resize event within frame.",paraId:0}]},45041:function(r,n,e){e.r(n),e.d(n,{texts:function(){return t}});var o=e(13249);const t=[]},69562:function(r,n,e){e.r(n),e.d(n,{texts:function(){return t}});var o=e(45261);const t=[]},51446:function(r,n,e){e.r(n),e.d(n,{texts:function(){return t}});var o=e(68537);const t=[{value:" ",paraId:0,tocIndex:0},{value:" ",paraId:0,tocIndex:0},{value:" ",paraId:0,tocIndex:0},{value:" ",paraId:0,tocIndex:0},{value:"Resize observer for React.",paraId:1,tocIndex:0},{value:"https://react-component.github.io/resize-observer/",paraId:2,tocIndex:1},{value:`import ResizeObserver from 'rc-resize-observer';
import { render } from 'react-dom';

render(
  <ResizeObserver
    onResize={() => {
      console.log('resized!');
    }}
  >
    <textarea />
  </ResizeObserver>,
  mountNode,
);
`,paraId:3,tocIndex:3},{value:"Property",paraId:4,tocIndex:4},{value:"Type",paraId:4,tocIndex:4},{value:"Default",paraId:4,tocIndex:4},{value:"Description",paraId:4,tocIndex:4},{value:"disabled",paraId:4,tocIndex:4},{value:"boolean",paraId:4,tocIndex:4},{value:"false",paraId:4,tocIndex:4},{value:"onResize",paraId:4,tocIndex:4},{value:"({ width, height }) => void",paraId:4,tocIndex:4},{value:"-",paraId:4,tocIndex:4},{value:"Trigger when child node resized",paraId:4,tocIndex:4},{value:`npm install
npm start
`,paraId:5,tocIndex:5},{value:"rc-resize-observer is released under the MIT license.",paraId:6,tocIndex:6}]},86834:function(r,n){n.Z=`@footer-prefix-cls: rc-footer;

.@{footer-prefix-cls} {
  position: relative;
  clear: both;
  color: rgba(255, 255, 255, .4);
  font-size: 14px;
  line-height: 1.5;
  background-color: #000;

  a {
    transition: all .3s;
    color: rgba(255, 255, 255, .9);
    text-decoration: none;

    &:hover {
      color: #40a9ff;
    }
  }

  &-container {
    width: 100%;
    max-width: 1200px;
    padding: 80px 0;
    margin: auto;
  }

  &-columns {
    display: flex;
    justify-content: space-around;
  }

  &-column {
    h2 {
      position: relative;
      margin: 0 auto 24px;
      font-weight: 500;
      font-size: 16px;
      color: #fff;
    }

    &-icon {
      margin-right: .5em;
      width: 22px;
      display: inline-block;
      vertical-align: middle;
      top: -1px;
      position: relative;
      text-align: center;

      > span,
      > svg,
      img {
        width: 100%;
        display: block;
      }
    }
  }

  &-item {
    margin: 12px 0;

    &-icon {
      margin-right: .4em;
      width: 16px;
      display: inline-block;
      vertical-align: middle;
      top: -1px;
      position: relative;
      text-align: center;

      > span,
      > svg,
      img {
        width: 100%;
        display: block;
      }
    }

    &-separator {
      margin: 0 .3em;
    }
  }

  &-bottom {
    &-container {
      border-top: 1px solid rgba(255, 255, 255, .25);
      width: 100%;
      max-width: 1200px;
      text-align: center;
      margin: 0 auto;
      padding: 16px 0;
      line-height: 32px;
      font-size: 16px;
    }
  }

  &-light {
    background-color: transparent;
    color: rgba(0, 0, 0, .85);

    h2,
    a {
      color: rgba(0, 0, 0, .85);
    }
  }

  &-light &-bottom-container {
    border-top-color: #e8e8e8;
  }

  &-light &-item-separator,
  &-light &-item-description {
    color: rgba(0, 0, 0, .45);
  }
}

@media only screen and (max-width: 767.99px) {
  .@{footer-prefix-cls} {
    text-align: center;

    &-container {
      padding: 40px 0;
    }

    &-columns {
      display: block;
    }

    &-column {
      display: block;
      margin-bottom: 40px;

      &:last-child {
        margin-bottom: 0;
      }
    }
  }
}
`},37050:function(r,n){n.Z=`import '../assets/index.less';
import React from 'react';
import type { ResizeObserverProps } from '../src';
import ResizeObserver from '../src';

const Wrapper = ({ children }: any) => <>{children}</>;

export default function App() {
  const [times, setTimes] = React.useState(0);
  const [disabled, setDisabled] = React.useState(false);
  const textareaRef = React.useRef<HTMLTextAreaElement>(null);

  React.useEffect(() => {
    console.log('Ref:', textareaRef.current);
  }, []);

  const onResize: ResizeObserverProps['onResize'] = ({
    width,
    height,
    offsetHeight,
    offsetWidth,
  }) => {
    setTimes(prevTimes => prevTimes + 1);
    console.log(
      'Resize:',
      '\\n',
      'BoundingBox',
      width,
      height,
      '\\n',
      'Offset',
      offsetWidth,
      offsetHeight,
    );
  };

  return (
    <React.StrictMode>
      <div style={{ transform: 'scale(1.1)', transformOrigin: '0% 0%' }}>
        <div>
          <label>
            <input
              type="checkbox"
              onChange={() => {
                setDisabled(!disabled);
              }}
              checked={disabled}
            />{' '}
            Disabled Observe
          </label>
          {' >>> '}
          <span>Resize times: {times}</span>
        </div>
        <ResizeObserver onResize={onResize} disabled={disabled}>
          <Wrapper>
            <textarea ref={textareaRef} placeholder="I'm a textarea!" />
          </Wrapper>
        </ResizeObserver>
      </div>
    </React.StrictMode>
  );
}
`},21339:function(r,n){n.Z=`import '../assets/index.less';
import React from 'react';
import ResizeObserver from '../src';

function randomSize() {
  return {
    width: Math.round(50 + Math.random() * 150),
    height: Math.round(50 + Math.random() * 150),
  };
}

const sharedStyle: React.CSSProperties = {
  display: 'flex',
  alignItems: 'center',
  justifyContent: 'center',
  color: '#fff',
};

export default function App() {
  const [size1, setSize1] = React.useState(randomSize());
  const [size2, setSize2] = React.useState(randomSize());

  console.log('Render:', size1, size2);

  return (
    <ResizeObserver.Collection
      onBatchResize={infoList => {
        console.log(
          'Batch Resize:',
          infoList,
          infoList.map(({ data, size }) => \`\${data}(\${size.width}/\${size.height})\`),
        );
      }}
    >
      <div style={{ display: 'flex', columnGap: 4, marginBottom: 8 }}>
        <button onClick={() => setSize1(randomSize())}>Resize: 1</button>
        <button onClick={() => setSize2(randomSize())}>Resize: 2</button>
        <button
          onClick={() => {
            setSize1(randomSize());
            setSize2(randomSize());
          }}
        >
          Resize: all
        </button>
      </div>
      <div style={{ display: 'flex', columnGap: 16 }}>
        <ResizeObserver data="shape_1">
          <div style={{ ...sharedStyle, ...size1, background: 'red' }}>1</div>
        </ResizeObserver>
        <ResizeObserver data="shape_2">
          <div style={{ ...sharedStyle, ...size2, background: 'blue' }}>2</div>
        </ResizeObserver>
      </div>
    </ResizeObserver.Collection>
  );
}
`},29425:function(r,n){n.Z=`import '../assets/index.less';
import React from 'react';
import ResizeObserver from '../src';

export default function App() {
  const [times, setTimes] = React.useState(0);
  const [width, setWidth] = React.useState(0);
  const [height, setHeight] = React.useState(0);
  const [disabled, setDisabled] = React.useState(false);

  const onResize = (size: { width: number; height: number }) => {
    setTimes(prevTimes => prevTimes + 1);
    setWidth(size.width);
    setHeight(size.height);
  };

  return (
    <React.StrictMode>
      <div>
        <div>
          <label>
            <input
              type="checkbox"
              onChange={() => {
                setDisabled(!disabled);
              }}
              checked={disabled}
            />{' '}
            Disabled Observe
          </label>
          {' >>> '}
          <span>
            Resize times: {times} ({width}/{height})
          </span>
        </div>
        <ResizeObserver onResize={onResize} disabled={disabled}>
          <textarea placeholder="I'm a textarea!" />
          <button type="button">Warning with multiple children</button>
        </ResizeObserver>
      </div>
    </React.StrictMode>
  );
}
`},19746:function(r,n){n.Z=`import '../assets/index.less';
import React from 'react';
import type { ResizeObserverProps } from '../src';
import ResizeObserver from '../src';

export default function App() {
  const [times, setTimes] = React.useState(0);
  const [disabled, setDisabled] = React.useState(false);

  const onResize: ResizeObserverProps['onResize'] = () => {
    setTimes(prevTimes => prevTimes + 1);
  };

  return (
    <React.StrictMode>
      <div style={{ transform: 'scale(1.1)', transformOrigin: '0% 0%' }}>
        <div>
          <label>
            <input
              type="checkbox"
              onChange={() => {
                setDisabled(!disabled);
              }}
              checked={disabled}
            />{' '}
            Disabled Observe
          </label>
          {' >>> '}
          <span>Resize times: {times}</span>
        </div>
        <ResizeObserver onResize={onResize} disabled={disabled}>
          {resizeRef => (
            <div style={{ display: 'inline-flex', flexDirection: 'column' }}>
              <textarea placeholder="I'm a textarea!" />
              <div ref={resizeRef} style={{ background: 'red', height: 50, fontSize: 10 }}>
                Target
              </div>
            </div>
          )}
        </ResizeObserver>
      </div>
    </React.StrictMode>
  );
}
`},76044:function(r,n){n.Z=`import * as React from 'react';
import type { SizeInfo } from '.';

type onCollectionResize = (size: SizeInfo, element: HTMLElement, data: any) => void;

export const CollectionContext = React.createContext<onCollectionResize>(null);

export interface ResizeInfo {
  size: SizeInfo;
  data: any;
  element: HTMLElement;
}

export interface CollectionProps {
  /** Trigger when some children ResizeObserver changed. Collect by frame render level */
  onBatchResize?: (resizeInfo: ResizeInfo[]) => void;
  children?: React.ReactNode;
}

/**
 * Collect all the resize event from children ResizeObserver
 */
export function Collection({ children, onBatchResize }: CollectionProps) {
  const resizeIdRef = React.useRef(0);
  const resizeInfosRef = React.useRef<ResizeInfo[]>([]);

  const onCollectionResize = React.useContext(CollectionContext);

  const onResize = React.useCallback<onCollectionResize>(
    (size, element, data) => {
      resizeIdRef.current += 1;
      const currentId = resizeIdRef.current;

      resizeInfosRef.current.push({
        size,
        element,
        data,
      });

      Promise.resolve().then(() => {
        if (currentId === resizeIdRef.current) {
          onBatchResize?.(resizeInfosRef.current);
          resizeInfosRef.current = [];
        }
      });

      // Continue bubbling if parent exist
      onCollectionResize?.(size, element, data);
    },
    [onBatchResize, onCollectionResize],
  );

  return <CollectionContext.Provider value={onResize}>{children}</CollectionContext.Provider>;
}
`},51336:function(r,n){n.Z=`import * as React from 'react';

export interface DomWrapperProps {
  children: React.ReactElement;
}

/**
 * Fallback to findDOMNode if origin ref do not provide any dom element
 */
export default class DomWrapper extends React.Component<DomWrapperProps> {
  render() {
    return this.props.children;
  }
}
`},11238:function(r,n){n.Z=`import findDOMNode from 'rc-util/lib/Dom/findDOMNode';
import { supportRef, useComposeRef, getNodeRef } from 'rc-util/lib/ref';
import * as React from 'react';
import type { ResizeObserverProps } from '..';
import { CollectionContext } from '../Collection';
import { observe, unobserve } from '../utils/observerUtil';
import DomWrapper from './DomWrapper';

export interface SingleObserverProps extends ResizeObserverProps {
  children: React.ReactElement | ((ref: React.RefObject<Element>) => React.ReactElement);
}

function SingleObserver(props: SingleObserverProps, ref: React.Ref<HTMLElement>) {
  const { children, disabled } = props;
  const elementRef = React.useRef<Element>(null);
  const wrapperRef = React.useRef<DomWrapper>(null);

  const onCollectionResize = React.useContext(CollectionContext);

  // =========================== Children ===========================
  const isRenderProps = typeof children === 'function';
  const mergedChildren = isRenderProps ? children(elementRef) : children;

  // ============================= Size =============================
  const sizeRef = React.useRef({
    width: -1,
    height: -1,
    offsetWidth: -1,
    offsetHeight: -1,
  });

  // ============================= Ref ==============================
  const canRef =
    !isRenderProps && React.isValidElement(mergedChildren) && supportRef(mergedChildren);
  const originRef: React.Ref<Element> = canRef ? getNodeRef(mergedChildren) : null;

  const mergedRef = useComposeRef(originRef, elementRef);

  const getDom = () =>
    findDOMNode<HTMLElement>(elementRef.current) ||
    // Support \`nativeElement\` format
    (elementRef.current && typeof elementRef.current === 'object'
      ? findDOMNode<HTMLElement>((elementRef.current as any)?.nativeElement)
      : null) ||
    findDOMNode<HTMLElement>(wrapperRef.current);

  React.useImperativeHandle(ref, () => getDom());

  // =========================== Observe ============================
  const propsRef = React.useRef<SingleObserverProps>(props);
  propsRef.current = props;

  // Handler
  const onInternalResize = React.useCallback((target: HTMLElement) => {
    const { onResize, data } = propsRef.current;

    const { width, height } = target.getBoundingClientRect();
    const { offsetWidth, offsetHeight } = target;

    /**
     * Resize observer trigger when content size changed.
     * In most case we just care about element size,
     * let's use \`boundary\` instead of \`contentRect\` here to avoid shaking.
     */
    const fixedWidth = Math.floor(width);
    const fixedHeight = Math.floor(height);

    if (
      sizeRef.current.width !== fixedWidth ||
      sizeRef.current.height !== fixedHeight ||
      sizeRef.current.offsetWidth !== offsetWidth ||
      sizeRef.current.offsetHeight !== offsetHeight
    ) {
      const size = { width: fixedWidth, height: fixedHeight, offsetWidth, offsetHeight };
      sizeRef.current = size;

      // IE is strange, right?
      const mergedOffsetWidth = offsetWidth === Math.round(width) ? width : offsetWidth;
      const mergedOffsetHeight = offsetHeight === Math.round(height) ? height : offsetHeight;

      const sizeInfo = {
        ...size,
        offsetWidth: mergedOffsetWidth,
        offsetHeight: mergedOffsetHeight,
      };

      // Let collection know what happened
      onCollectionResize?.(sizeInfo, target, data);

      if (onResize) {
        // defer the callback but not defer to next frame
        Promise.resolve().then(() => {
          onResize(sizeInfo, target);
        });
      }
    }
  }, []);

  // Dynamic observe
  React.useEffect(() => {
    const currentElement: HTMLElement = getDom();

    if (currentElement && !disabled) {
      observe(currentElement, onInternalResize);
    }

    return () => unobserve(currentElement, onInternalResize);
  }, [elementRef.current, disabled]);

  // ============================ Render ============================
  return (
    <DomWrapper ref={wrapperRef}>
      {canRef
        ? React.cloneElement(mergedChildren as any, {
            ref: mergedRef,
          })
        : mergedChildren}
    </DomWrapper>
  );
}

const RefSingleObserver = React.forwardRef(SingleObserver);

if (process.env.NODE_ENV !== 'production') {
  RefSingleObserver.displayName = 'SingleObserver';
}

export default RefSingleObserver;
`},2333:function(r,n){n.Z=`import * as React from 'react';
import toArray from 'rc-util/lib/Children/toArray';
import { warning } from 'rc-util/lib/warning';
import SingleObserver from './SingleObserver';
import { Collection } from './Collection';

const INTERNAL_PREFIX_KEY = 'rc-observer-key';

import { _rs } from './utils/observerUtil';
export {
  /** @private Test only for mock trigger resize event */
  _rs,
};

export interface SizeInfo {
  width: number;
  height: number;
  offsetWidth: number;
  offsetHeight: number;
}

export type OnResize = (size: SizeInfo, element: HTMLElement) => void;

export interface ResizeObserverProps {
  /** Pass to ResizeObserver.Collection with additional data */
  data?: any;
  children: React.ReactNode | ((ref: React.RefObject<any>) => React.ReactElement);
  disabled?: boolean;
  /** Trigger if element resized. Will always trigger when first time render. */
  onResize?: OnResize;
}

function ResizeObserver(props: ResizeObserverProps, ref: React.Ref<HTMLElement>) {
  const { children } = props;
  const childNodes = typeof children === 'function' ? [children] : toArray(children);

  if (process.env.NODE_ENV !== 'production') {
    if (childNodes.length > 1) {
      warning(
        false,
        'Find more than one child node with \`children\` in ResizeObserver. Please use ResizeObserver.Collection instead.',
      );
    } else if (childNodes.length === 0) {
      warning(false, '\`children\` of ResizeObserver is empty. Nothing is in observe.');
    }
  }

  return childNodes.map((child, index) => {
    const key = child?.key || \`\${INTERNAL_PREFIX_KEY}-\${index}\`;
    return (
      <SingleObserver {...props} key={key} ref={index === 0 ? ref : undefined}>
        {child}
      </SingleObserver>
    );
  }) as any as React.ReactElement;
}

const RefResizeObserver = React.forwardRef(ResizeObserver) as React.ForwardRefExoticComponent<
  React.PropsWithoutRef<ResizeObserverProps> & React.RefAttributes<any>
> & {
  Collection: typeof Collection;
};

if (process.env.NODE_ENV !== 'production') {
  RefResizeObserver.displayName = 'ResizeObserver';
}

RefResizeObserver.Collection = Collection;

export default RefResizeObserver;
`},57571:function(r,n){n.Z=`import ResizeObserver from 'resize-observer-polyfill';

export type ResizeListener = (element: Element) => void;

// =============================== Const ===============================
const elementListeners = new Map<Element, Set<ResizeListener>>();

function onResize(entities: ResizeObserverEntry[]) {
  entities.forEach(entity => {
    const { target } = entity;
    elementListeners.get(target)?.forEach(listener => listener(target));
  });
}

// Note: ResizeObserver polyfill not support option to measure border-box resize
const resizeObserver = new ResizeObserver(onResize);

// Dev env only
export const _el = process.env.NODE_ENV !== 'production' ? elementListeners : null; // eslint-disable-line
export const _rs = process.env.NODE_ENV !== 'production' ? onResize : null; // eslint-disable-line

// ============================== Observe ==============================
export function observe(element: Element, callback: ResizeListener) {
  if (!elementListeners.has(element)) {
    elementListeners.set(element, new Set());
    resizeObserver.observe(element);
  }

  elementListeners.get(element).add(callback);
}

export function unobserve(element: Element, callback: ResizeListener) {
  if (elementListeners.has(element)) {
    elementListeners.get(element).delete(callback);
    if (!elementListeners.get(element).size) {
      resizeObserver.unobserve(element);
      elementListeners.delete(element);
    }
  }
}
`}}]);
